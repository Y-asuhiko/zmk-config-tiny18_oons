# ===========================
# Battery config
# ===========================
CONFIG_ZMK_BATTERY_REPORTING=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_PROXY=y
CONFIG_ZMK_SPLIT_BLE_CENTRAL_BATTERY_LEVEL_FETCHING=y
CONFIG_BT_BAS=y

# ===========================
# Power saving for BLE
# ===========================

# Enable low power modes
CONFIG_PM=y
CONFIG_PM_DEVICE=y
CONFIG_HAS_PM=y

# Let Zephyr aggressively sleep
CONFIG_IDLE_STACK_SIZE=256
CONFIG_SYS_CLOCK_TICKS_PER_SEC=100

# Bluetooth low power
CONFIG_BT=y
CONFIG_BT_MAX_CONN=1
CONFIG_BT_CTRL_CONN_LPW=y
CONFIG_BT_AUTO_CONN=y

# Longer connection interval (lower power)
CONFIG_ZMK_BLE_PERIPHERAL_PREF_MIN_INT=24   # default 6
CONFIG_ZMK_BLE_PERIPHERAL_PREF_MAX_INT=48   # default 6

# Disable BLE security overhead if不要
CONFIG_BT_SMP=n

# ===========================
# Split power saving
# ===========================

# Reconnect slower to reduce scanning power
CONFIG_ZMK_SPLIT_BLE_RECONNECT_TIMEOUT=800  # default: fast

# ===========================
# RGB / LED settings
# ===========================

CONFIG_RGBLED_WIDGET_SHOW_LAYER_CHANGE=y

# Reduce LED power usage
CONFIG_ZMK_RGB_UNDERGLOW=n        # 使っている場合は必要に応じて
CONFIG_ZMK_LED_SLEEP=y            # Deep sleep中LED OFF

# ===========================
# ZMK Studio
# ===========================

CONFIG_ZMK_STUDIO=y
CONFIG_ZMK_STUDIO_LOCKING=n

# Disable live preview polling
CONFIG_ZMK_STUDIO_WAIT_MS=100
